
{% extends "base.html" %}

{% block content %}


<div class="container-fluid text-white p-0">
    <div class="p-5 text-center bg-image" style="background-image: url('static/senai-1.0.0/images/Background.jpg');background-position: center; background-repeat: no-repeat; background-size: 100%;height: 1000px; -webkit-background-size: cover; -moz-background-size: cover;-o-background-size: cover; ">
        <div class="row d-flex justify-content-center">
            <div class="col-12 col-lg-2 px-1 py-1">
                <div class="card o-hidden h-100 bg-light border-info align-items-center">
                    <div class="card-body">
                        <form class="text-center" id="loginForm">
                            <i class="fas fa-sign-in-alt bigIcon my-2"></i>
                            <input type="text" class="form-control my-2" id="user" placeholder="Usuário" required>
                            <input type="password" class="form-control my-2" id="password" placeholder="Senha" required>
                            <button type="submit" class="btn btn-info my-2 w-100">Entrar</button>
                        </form>                    
                    </div>   
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    /*Login request*/
    jQuery('#loginForm').on('submit', function(e){
        e.preventDefault();
        jQuery.ajax({
            url: '/login',
            type: 'POST',
            data: {'user': jQuery('#user').val(), 'password': jQuery('#password').val()}, 
            success: function(response){
                if(response['Login']){
                    jQuery('#message').modal('show');
                    jQuery('#messageText').text('Login efetuado com sucesso');
                    setTimeout(function(){jQuery('#message').modal('hide')}, 1500);
                    location.reload();  
                }
                else{
                    jQuery('#message').modal('show');
                    jQuery('#messageText').text('Usuário e/ou senha incorretos');
                    setTimeout(function(){jQuery('#message').modal('hide')}, 1500);  

                }
                
            }
        });
    });

</script>

{% endblock %}