{% extends "base.html" %}

{% block content %}

<div class="container-fluid h-100">

    <div class="row justify-content-center text-black">
        <div class="col-12 col-lg-4 d-flex align-items-center justify-content-center">
        </div>
        <div class="col-12 col-lg-4 d-flex align-items-center justify-content-lg-center justify-content-center"><h4>Monitoramento</h4></div>
        <div class="col-12 col-lg-4 d-flex align-items-center justify-content-center">
            <div>
                <output id="data" style="font-size: 20px;"></output>
            </div>
        </div>
    </div>

    <div class="row justify-content-center text-black">

        <div class="col-12 col-lg-4 px-1 py-1">
            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                <div class="card-header bg-danger" id="card-1">
                    <span class="h4 mr-auto">{{ machine_names[0][1] }}</span>
                </div>
                <div class="card-body">
                    <div class="row justify-content-center text-black">
                        <div class="col-12 col-lg-12 d-flex align-items-center justify-content-lg-center ">
                            <div class="alert alert-success" id="estado-setup-1" role="alert"></div>
                        </div>
                    </div>
                    <div class="row justify-content-center text-black">
                        <div class="col-12 col-lg-12 d-flex align-items-center justify-content-lg-center ">
                            <div>
                                <output id="dtinicio-1" style="font-size: 18px;"></output>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center">

                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Peças</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="pecas-1" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Meta</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="meta-1" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">OEE</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="oee-1" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <canvas class="canvasChart" id="indicadores-1"></canvas> 
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row justify-content-center">

                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Paradas [Minutos]</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <div class="alert alert-success" id="paradas-1" role="alert"></div>
                                        </div>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <canvas class="canvasChart" id="paradas-graf-1" height="100"></canvas> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Refugos</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <div class="alert alert-success" id="refugos-1" role="alert"></div>
                                        </div>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <canvas class="canvasChart" id="refugos-graf-1" height="100"></canvas> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-start">

                        <div class="col-12 col-lg-12 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">  
                                    <div class="col-12 col-lg-12 px-1 py-1">
                                        <div class="row justify-content-center">
                                            <h5 class="card-title">Tempo de Ciclo [s]</h5>
                                        </div>
                                        <div class="row justify-content-center">
                                            <canvas class="canvasChart" id="ciclo-graf-1" height="100"></canvas> 
                                        </div>
                                        <div class="row justify-content-center">
                                            <div class="col-12 col-lg-8 px-1 py-1 d-flex justify-content-center text-center align-items-center">
                                                <div class="alert alert-success" id="takt-1" role="alert">Ciclo Médio</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row justify-content-start">

                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Primeiro Turno</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <table class="table-sm table-striped" style="width: 100%;">
                                            <thead>
                                              <tr>
                                                <th scope="col">Inicio</th>
                                                <th scope="col">Fim</th>
                                                <th scope="col">Quantidade</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <th scope="row">06:05</th>
                                                <th scope="row">07:00</th>
                                                <td id="qt1-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">07:00</th>
                                                <th scope="row">08:00</th>
                                                <td id="qt2-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">08:00</th>
                                                <th scope="row">09:00</th>
                                                <td id="qt3-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">09:00</th>
                                                <th scope="row">10:00</th>
                                                <td id="qt4-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">10:00</th>
                                                <th scope="row">11:00</th>
                                                <td id="qt5-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">11:00</th>
                                                <th scope="row">12:00</th>
                                                <td id="qt6-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">12:00</th>
                                                <th scope="row">13:00</th>
                                                <td id="qt7-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">13:00</th>
                                                <th scope="row">14:00</th>
                                                <td id="qt8-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">14:00</th>
                                                <th scope="row">15:00</th>
                                                <td id="qt9-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">15:00</th>
                                                <th scope="row">15:48</th>
                                                <td id="qt10-1"></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                    </div> 

                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Segundo Turno</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <table class="table-sm table-striped" style="width: 100%;">
                                            <thead>
                                              <tr>
                                                <th scope="col">Inicio</th>
                                                <th scope="col">Fim</th>
                                                <th scope="col">Quantidade</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <th scope="row">18:30</th>
                                                <th scope="row">19:00</th>
                                                <td id="qt11-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">19:00</th>
                                                <th scope="row">20:00</th>
                                                <td id="qt12-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">20:00</th>
                                                <th scope="row">21:00</th>
                                                <td id="qt13-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">22:00</th>
                                                <th scope="row">23:00</th>
                                                <td id="qt14-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">23:00</th>
                                                <th scope="row">00:00</th>
                                                <td id="qt15-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">00:00</th>
                                                <th scope="row">01:00</th>
                                                <td id="qt16-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">01:00</th>
                                                <th scope="row">02:00</th>
                                                <td id="qt17-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">02:00</th>
                                                <th scope="row">03:00</th>
                                                <td id="qt18-1"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">03:00</th>
                                                <th scope="row">03:42</th>
                                                <td id="qt19-1"></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                    </div> 

                                </div>
                            </div>
                        </div>

                    </div>
                    
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-4 px-1 py-1">
            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                <div class="card-header bg-danger" id="card-2">
                    <span class="h4 mr-auto">{{ machine_names[1][1] }}</span>
                </div>
                <div class="card-body">
                    <div class="row justify-content-center text-black">
                        <div class="col-12 col-lg-12 d-flex align-items-center justify-content-lg-center ">
                            <div class="alert alert-success" id="estado-setup-2" role="alert"></div>
                        </div>
                    </div>
                    <div class="row justify-content-center text-black">
                        <div class="col-12 col-lg-12 d-flex align-items-center justify-content-lg-center ">
                            <div>
                                <output id="dtinicio-2" style="font-size: 18px;"></output>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center">

                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Peças</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="pecas-2" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Meta</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="meta-2" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">OEE</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="oee-2" width="130" height="130" ></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <canvas class="canvasChart" id="indicadores-2"></canvas> 
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row justify-content-center">

                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Paradas [Minutos]</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <div class="alert alert-success" id="paradas-2" role="alert"></div>
                                        </div>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <canvas class="canvasChart" id="paradas-graf-2" height="100"></canvas> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Refugos</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <div class="alert alert-success" id="refugos-2" role="alert"></div>
                                        </div>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <canvas class="canvasChart" id="refugos-graf-2" height="100"></canvas> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-start">

                        <div class="col-12 col-lg-12 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">  
                                    <div class="col-12 col-lg-12 px-1 py-1">
                                        <div class="row justify-content-center">
                                            <h5 class="card-title">Tempo de Ciclo [s]</h5>
                                        </div>
                                        <div class="row justify-content-center">
                                            <canvas class="canvasChart" id="ciclo-graf-2" height="100"></canvas> 
                                        </div>
                                        <div class="row justify-content-center">
                                            <div class="col-12 col-lg-8 px-1 py-1 d-flex justify-content-center text-center align-items-center">
                                                <div class="alert alert-success" id="takt-2" role="alert">Ciclo Médio</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row justify-content-start">

                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Primeiro Turno</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <table class="table-sm table-striped" style="width: 100%;">
                                            <thead>
                                              <tr>
                                                <th scope="col">Inicio</th>
                                                <th scope="col">Fim</th>
                                                <th scope="col">Quantidade</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <th scope="row">06:05</th>
                                                <th scope="row">07:00</th>
                                                <td id="qt1-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">07:00</th>
                                                <th scope="row">08:00</th>
                                                <td id="qt2-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">08:00</th>
                                                <th scope="row">09:00</th>
                                                <td id="qt3-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">09:00</th>
                                                <th scope="row">10:00</th>
                                                <td id="qt4-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">10:00</th>
                                                <th scope="row">11:00</th>
                                                <td id="qt5-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">11:00</th>
                                                <th scope="row">12:00</th>
                                                <td id="qt6-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">12:00</th>
                                                <th scope="row">13:00</th>
                                                <td id="qt7-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">13:00</th>
                                                <th scope="row">14:00</th>
                                                <td id="qt8-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">14:00</th>
                                                <th scope="row">15:00</th>
                                                <td id="qt9-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">15:00</th>
                                                <th scope="row">15:48</th>
                                                <td id="qt10-2"></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                    </div> 

                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Segundo Turno</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <table class="table-sm table-striped" style="width: 100%;">
                                            <thead>
                                              <tr>
                                                <th scope="col">Inicio</th>
                                                <th scope="col">Fim</th>
                                                <th scope="col">Quantidade</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <th scope="row">18:30</th>
                                                <th scope="row">19:00</th>
                                                <td id="qt11-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">19:00</th>
                                                <th scope="row">20:00</th>
                                                <td id="qt12-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">20:00</th>
                                                <th scope="row">21:00</th>
                                                <td id="qt13-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">22:00</th>
                                                <th scope="row">23:00</th>
                                                <td id="qt14-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">23:00</th>
                                                <th scope="row">00:00</th>
                                                <td id="qt15-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">00:00</th>
                                                <th scope="row">01:00</th>
                                                <td id="qt16-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">01:00</th>
                                                <th scope="row">02:00</th>
                                                <td id="qt17-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">02:00</th>
                                                <th scope="row">03:00</th>
                                                <td id="qt18-2"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">03:00</th>
                                                <th scope="row">03:42</th>
                                                <td id="qt19-2"></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                    </div> 

                                </div>
                            </div>
                        </div>

                    </div>
                    
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-4 px-1 py-1">
            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                <div class="card-header bg-danger" id="card-3">
                    <span class="h4 mr-auto">{{ machine_names[2][1] }}</span>
                </div>
                <div class="card-body">
                    <div class="row justify-content-center text-black">
                        <div class="col-12 col-lg-12 d-flex align-items-center justify-content-lg-center ">
                            <div class="alert alert-success" id="estado-setup-3" role="alert"></div>
                        </div>
                    </div>
                    <div class="row justify-content-center text-black">
                        <div class="col-12 col-lg-12 d-flex align-items-center justify-content-lg-center ">
                            <div>
                                <output id="dtinicio-3" style="font-size: 18px;"></output>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center">

                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Peças</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="pecas-3" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Meta</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="meta-3" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-2 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">OEE</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <canvas class="canvasRing" id="oee-3" width="130" height="130"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <canvas class="canvasChart" id="indicadores-3"></canvas> 
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row justify-content-center">

                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Paradas [Minutos]</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <div class="alert alert-success" id="paradas-3" role="alert"></div>
                                        </div>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <canvas class="canvasChart" id="paradas-graf-3" height="100"></canvas> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Refugos</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <div class="alert alert-success" id="refugos-3" role="alert"></div>
                                        </div>
                                    </div>
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-lg-12 px-1 py-1">
                                            <canvas class="canvasChart" id="refugos-graf-3" height="100"></canvas> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-start">

                        <div class="col-12 col-lg-12 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">  
                                    <div class="col-12 col-lg-12 px-1 py-1">
                                        <div class="row justify-content-center">
                                            <h5 class="card-title">Tempo de Ciclo [s]</h5>
                                        </div>
                                        <div class="row justify-content-center">
                                            <canvas class="canvasChart" id="ciclo-graf-3" height="100"></canvas> 
                                        </div>
                                        <div class="row justify-content-center">
                                            <div class="col-12 col-lg-8 px-1 py-1 d-flex justify-content-center text-center align-items-center">
                                                <div class="alert alert-success" id="takt-3" role="alert">Ciclo Médio</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row justify-content-start">

                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Primeiro Turno</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <table class="table-sm table-striped" style="width: 100%;">
                                            <thead>
                                              <tr>
                                                <th scope="col">Inicio</th>
                                                <th scope="col">Fim</th>
                                                <th scope="col">Quantidade</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <th scope="row">06:05</th>
                                                <th scope="row">07:00</th>
                                                <td id="qt1-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">07:00</th>
                                                <th scope="row">08:00</th>
                                                <td id="qt2-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">08:00</th>
                                                <th scope="row">09:00</th>
                                                <td id="qt3-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">09:00</th>
                                                <th scope="row">10:00</th>
                                                <td id="qt4-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">10:00</th>
                                                <th scope="row">11:00</th>
                                                <td id="qt5-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">11:00</th>
                                                <th scope="row">12:00</th>
                                                <td id="qt6-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">12:00</th>
                                                <th scope="row">13:00</th>
                                                <td id="qt7-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">13:00</th>
                                                <th scope="row">14:00</th>
                                                <td id="qt8-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">14:00</th>
                                                <th scope="row">15:00</th>
                                                <td id="qt9-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">15:00</th>
                                                <th scope="row">15:48</th>
                                                <td id="qt10-3"></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                    </div> 

                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 px-1 py-1">
                            <div class="card text-black o-hidden bg-light border-info text-center h-100">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <h5 class="card-title">Segundo Turno</h5>
                                    </div>
                                    <div class="row justify-content-center">
                                        <table class="table-sm table-striped" style="width: 100%;">
                                            <thead>
                                              <tr>
                                                <th scope="col">Inicio</th>
                                                <th scope="col">Fim</th>
                                                <th scope="col">Quantidade</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <th scope="row">18:30</th>
                                                <th scope="row">19:00</th>
                                                <td id="qt11-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">19:00</th>
                                                <th scope="row">20:00</th>
                                                <td id="qt12-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">20:00</th>
                                                <th scope="row">21:00</th>
                                                <td id="qt13-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">22:00</th>
                                                <th scope="row">23:00</th>
                                                <td id="qt14-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">23:00</th>
                                                <th scope="row">00:00</th>
                                                <td id="qt15-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">00:00</th>
                                                <th scope="row">01:00</th>
                                                <td id="qt16-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">01:00</th>
                                                <th scope="row">02:00</th>
                                                <td id="qt17-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">02:00</th>
                                                <th scope="row">03:00</th>
                                                <td id="qt18-3"></td>
                                              </tr>
                                              <tr>
                                                <th scope="row">03:00</th>
                                                <th scope="row">03:42</th>
                                                <td id="qt19-3"></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                    </div> 

                                </div>
                            </div>
                        </div>

                    </div>
                    
                </div>
            </div>
        </div>

    </div>


</div>


<script>


function atualizaRelogio(){ 
	var momentoAtual = new Date();
	var vhora = momentoAtual.getHours();
	var vminuto = momentoAtual.getMinutes();
	var vsegundo = momentoAtual.getSeconds();	
	var vdia = momentoAtual.getDate();
	var vmes = momentoAtual.getMonth() + 1;
	var vano = momentoAtual.getFullYear();
			
	if (vdia < 10){ vdia = "0" + vdia;}
	if (vmes < 10){ vmes = "0" + vmes;}
	if (vhora < 10){ vhora = "0" + vhora;}
	if (vminuto < 10){ vminuto = "0" + vminuto;}
	if (vsegundo < 10){ vsegundo = "0" + vsegundo;}

	dataFormat = vdia + "/" + vmes + "/" + vano;
	horaFormat = vhora + " : " + vminuto + " : " + vsegundo;

	document.getElementById("data").innerHTML = 'Atual: ' + dataFormat +'   '+ horaFormat;

	setTimeout("atualizaRelogio()",1000);
};

var table;

function drawRing(canvas, color, value){
        var ctx = canvas.getContext('2d');
        /*Draw text*/
        ctx.textAlign = 'center';
        ctx. textBaseline = 'middle';
        ctx.fillStyle = "black";
        ctx.font = "30px Arial";
        ctx.fillText(String(value), (canvas.width / 2), (canvas.height / 2));
        /*Draw ring*/
        ctx.beginPath()
        ctx.arc(Math.floor(canvas.width / 2),Math.floor(canvas.height / 2),(canvas.height / 2),0,Math.PI*2, false); // outer (filled)
        ctx.arc(Math.floor(canvas.width / 2),Math.floor(canvas.height / 2),(canvas.height / 2)*0.8,0,Math.PI*2, true); // outer (unfills it)
        ctx.fillStyle = color;
        ctx.fill();

        return true;
    }

    drawRing(document.getElementById("pecas-1"), "#c08863", 0);
    drawRing(document.getElementById("meta-1"), "#c08863", 0);
    drawRing(document.getElementById("oee-1"), "#c08863", 0);

    drawRing(document.getElementById("pecas-2"), "#c08863", 0);
    drawRing(document.getElementById("meta-2"), "#c08863", 0);
    drawRing(document.getElementById("oee-2"), "#c08863", 0);

    drawRing(document.getElementById("pecas-3"), "#c08863", 0);
    drawRing(document.getElementById("meta-3"), "#c08863", 0);
    drawRing(document.getElementById("oee-3"), "#c08863", 0);

    atualizaRelogio();
    atualizar();

function updateRing(canvas, color, value){
    /*Capturar o contexto e salvar a cor utilizada*/
    var ctx = canvas.getContext('2d');
    /*Limpar o desenho*/
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    /*Desenhar novamente*/
    drawRing(canvas, color, value);
    return true;
    }

    var options1 = {
        maintainAspectRatio: false,
        responsive: true,
        tooltips: {
        enabled: false
        },
        legend:{
        labels: {
                fontColor: "black",
                fontSize: 0,
                boxWidth: 0,
                padding: 10,
            },
            onClick: (e) => e.stopPropagation(),
            position:'bottom',
            aling:'start',
        },
        scales: {
        xAxes: [{
            ticks: {
                fontColor: "black",
                fontSize: 12
            },
            gridLines:{color:'#343a40'}
        }],
        yAxes: [{
            ticks: {
                fontColor: "black",
                suggestedMin: 0,
                suggestedMax: 120,
                stepSize:200
            },
            display: false
        }],
        },
        hover: {
              animationDuration: 0
            },
        animation: {
            duration: 1,
            onComplete: function() {
            var chartInstance = this.chart,
                ctx = chartInstance.ctx;
 
                ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);
                ctx.font = "16px arial"
                ctx.textAlign = 'center';
                ctx.textBaseline = 'bottom';
 
                this.data.datasets.forEach(function(dataset, i) {
                  var meta = chartInstance.controller.getDatasetMeta(i);
                  meta.data.forEach(function(bar, index) {
                    var data = dataset.data[index];
                    ctx.fillText(data +'%', bar._model.x, bar._model.y +2);
                  });
                });
              }
            },
        title: {
            display: false
        }
    };

    var options2 = {
        maintainAspectRatio: false,
        responsive: true,
        tooltips: {
        enabled: false
        },
        legend:{
        labels: {
                fontColor: "black",
                fontSize: 0,
                boxWidth: 0,
                padding: 10,
            },
        },
        scales: {
        xAxes: [{
            ticks: {
                fontColor: "black",
                fontSize: 10
            },
            gridLines:{color:'#343a40'}
        }],
        yAxes: [{
            ticks: {
                fontColor: "black",
                suggestedMin: 0,
                stepSize:20
            },
            display: true
        }],
        },
        hover: {
              animationDuration: 0
            }
    };

    var options3 = {
        maintainAspectRatio: false,
        responsive: true,
        tooltips: {
        enabled: false
        },
        legend:{
        labels: {
                fontColor: "black",
                fontSize: 0,
                boxWidth: 0,
                padding: 10,
            },
        },
        scales: {
        xAxes: [{
            ticks: {
                fontColor: "black",
                fontSize: 10
            },
            gridLines:{color:'#343a40'}
        }],
        yAxes: [{
            ticks: {
                fontColor: "black",
            },
            display: true
        }],
        },
        hover: {
              animationDuration: 0
            }
    };

    var dtoeearray1 = ['INDICADORES OEE'];
    var indicadores = ["Disponibilidade", "Performance", "Qualidade"];
    var colouarray = ['red', 'green', 'blue'];
    var initialData = [0, 0, 0, 0];
    var color1 = ['#003f5c', '#58508d' ,'#bc5090', '#ff6361', '#ffa600']
    var updatedInd1;

    /*Máquina 01*/
    /*grafico 1 */
    var ctx1 = document.getElementById("indicadores-1");
    var chart1 = new Chart(ctx1, {
            type: 'bar',
            options:options1,
            data: {
                labels: indicadores,
                datasets: [{
                    backgroundColor: colouarray,
                    data: initialData
                }]
            }
        });
    
    /*grafico 2 - Paradas */
    var ctx2 = document.getElementById("paradas-graf-1");
    var chart2 = new Chart(ctx2, {
            type: 'bar',
            options:options3,
            data: {
                datasets: [{
                    backgroundColor: color1,
                    data: initialData
                }]
            }
        });
    
    /*grafico 3 - Refugos */
    var ctx3 = document.getElementById("refugos-graf-1");
    var chart3 = new Chart(ctx3, {
            type: 'bar',
            options:options2,
            data: {
                datasets: [{
                    backgroundColor: color1,
                    data: initialData
                }]
            }
        });

    /*Máquina 02*/
    /*grafico 1 */
    var ctx4 = document.getElementById("indicadores-2");
    var chart4 = new Chart(ctx4, {
            type: 'bar',
            options:options1,
            data: {
                labels: indicadores,
                datasets: [{
                    backgroundColor: colouarray,
                    data: initialData
                }]
            }
        });
    
    /*grafico 2 - Paradas */
    var ctx5 = document.getElementById("paradas-graf-2");
    var chart5 = new Chart(ctx5, {
            type: 'bar',
            options:options3,
            data: {
                datasets: [{
                    backgroundColor: color1,
                    data: initialData
                }]
            }
        });
    
    /*grafico 3 - Refugos */
    var ctx6 = document.getElementById("refugos-graf-2");
    var chart6 = new Chart(ctx6, {
            type: 'bar',
            options:options2,
            data: {
                datasets: [{
                    backgroundColor: color1,
                    data: initialData
                }]
            }
        });

    /*Máquina 03*/
    /*grafico 1 */
    var ctx7 = document.getElementById("indicadores-3");
    var chart7 = new Chart(ctx7, {
            type: 'bar',
            options:options1,
            data: {
                labels: indicadores,
                datasets: [{
                    backgroundColor: colouarray,
                    data: initialData
                }]
            }
        });
    
    /*grafico 2 - Paradas */
    var ctx8 = document.getElementById("paradas-graf-3");
    var chart8 = new Chart(ctx8, {
            type: 'bar',
            options:options3,
            data: {
                datasets: [{
                    backgroundColor: color1,
                    data: initialData
                }]
            }
        });
    
    /*grafico 3 - Refugos */
    var ctx9 = document.getElementById("refugos-graf-3");
    var chart9 = new Chart(ctx9, {
            type: 'bar',
            options:options2,
            data: {
                datasets: [{
                    backgroundColor: color1,
                    data: initialData
                }]
            }
        });



    function prepareLineData(jsondata, colors){
    var result=[];
    /*Criar uma cópia do json recebido para deletar uma entrada*/
    var receivedData = {...jsondata};
    Object.keys(receivedData).forEach(function(source, index) {
    result.push({
        data: jsondata[source],
        backgroundColor: colors[source],
        label: source,
        fill: false,
        borderColor: "#27aeef"
    });
    });   
    return result;
    }

    var backgroundColorDict={
        'ciclo': '#0434738d'
    }

    /*Grafico de ciclos*/
    Chart.defaults.global.defaultFontColor = '#000000';
    jQuery.ajax({
            url:'/relatorio-takt',
            type: 'GET',
            data: {'base-tempo': '01 day'},
            success:  function(response){
                /*Preparar dados para inserir no gráfico de linhas*/
                var lineData = prepareLineData(response, backgroundColorDict);
                /*Montar gráfico*/
                console.log(response)
                lineChart1 = new Chart(document.getElementById("ciclo-graf-1"), 
                {
                    type: 'line', 
                    data:   {
                                datasets:   lineData,
                                fill: false
                            }, 
                    options:{       
                                legend: {
                                    display: false
                                },
                                animation: {
                                    duration: 0
                                },
                                scales:     {   
                                                xAxes:  [
                                                            {   
                                                                type: 'time',
                                                                display: false, 
                                                                
                                                                time:   {
                                                                            parser: 'DD/MM/YYYY HH:mm',
                                                                            
                                                                            displayFormats: {
                                                                                                millisecond: 'HH:mm',
                                                                                                second: 'HH:mm',
                                                                                                minute: 'HH:mm', 
                                                                                                hour: 'DD/MM HH:mm', 
                                                                                                day: 'DD/MM HH:mm', 
                                                                                                month:'DD/MM/YY'
                                                                                            }
                                                                        }
                                                            }, 
                                                            {   
                                                                gridLines:  {color:'#FFFFFF'},
                                                                display: false

                                                            }
                                                        ],
                                                yAxes: [ {
                                                    beginAtZero: true,
                                                }
                                                ]
                                            },
                                tooltips:   {callbacks: {
                                                    title: function (tooltipItems) {
                                                    return 'Tempo de ciclo:';
                                                    },
                                                    label: function(tooltipItem) {
                                                        return Number(tooltipItem.yLabel) + " Segundos";
                                                    },  
                                                },
                                                titleFont: {weight: 'bold'},
                                                bodyFont: {weight: 'bold'},
                                                backgroundColor:'#d5d3bf', 
                                                bodyFontColor:'#000000', 
                                                titleFontColor:'#000000',
                                            },
                                maintainAspectRatio: false,
                                responsive: true
                            }
                });
            
                lineChart2 = new Chart(document.getElementById("ciclo-graf-2"), 
                {
                    type: 'line', 
                    data:   {
                                datasets:   lineData,
                                fill: false
                            }, 
                    options:{       
                                legend: {
                                    display: false
                                },
                                animation: {
                                    duration: 0
                                },
                                scales:     {   
                                                xAxes:  [
                                                            {   
                                                                type: 'time',
                                                                display: false, 
                                                                
                                                                time:   {
                                                                            parser: 'DD/MM/YYYY HH:mm',
                                                                            
                                                                            displayFormats: {
                                                                                                millisecond: 'HH:mm',
                                                                                                second: 'HH:mm',
                                                                                                minute: 'HH:mm', 
                                                                                                hour: 'DD/MM HH:mm', 
                                                                                                day: 'DD/MM HH:mm', 
                                                                                                month:'DD/MM/YY'
                                                                                            }
                                                                        }
                                                            }, 
                                                            {   
                                                                gridLines:  {color:'#FFFFFF'},
                                                                display: false

                                                            }
                                                        ],
                                                yAxes: [ {
                                                    beginAtZero: true,
                                                }
                                                ]
                                            },
                                tooltips:   {callbacks: {
                                                    title: function (tooltipItems) {
                                                    return 'Tempo de ciclo:';
                                                    },
                                                    label: function(tooltipItem) {
                                                        return Number(tooltipItem.yLabel) + " Segundos";
                                                    },  
                                                },
                                                titleFont: {weight: 'bold'},
                                                bodyFont: {weight: 'bold'},
                                                backgroundColor:'#d5d3bf', 
                                                bodyFontColor:'#000000', 
                                                titleFontColor:'#000000',
                                            },
                                maintainAspectRatio: false,
                                responsive: true
                            }
                });
            
                lineChart3 = new Chart(document.getElementById("ciclo-graf-3"), 
                {
                    type: 'line', 
                    data:   {
                                datasets:   lineData,
                                fill: false
                            }, 
                    options:{       
                                legend: {
                                    display: false
                                },
                                animation: {
                                    duration: 0
                                },
                                scales:     {   
                                                xAxes:  [
                                                            {   
                                                                type: 'time',
                                                                display: false, 
                                                                
                                                                time:   {
                                                                            parser: 'DD/MM/YYYY HH:mm',
                                                                            
                                                                            displayFormats: {
                                                                                                millisecond: 'HH:mm',
                                                                                                second: 'HH:mm',
                                                                                                minute: 'HH:mm', 
                                                                                                hour: 'DD/MM HH:mm', 
                                                                                                day: 'DD/MM HH:mm', 
                                                                                                month:'DD/MM/YY'
                                                                                            }
                                                                        }
                                                            }, 
                                                            {   
                                                                gridLines:  {color:'#FFFFFF'},
                                                                display: false

                                                            }
                                                        ],
                                                yAxes: [ {
                                                    beginAtZero: true,
                                                }
                                                ]
                                            },
                                tooltips:   {callbacks: {
                                                    title: function (tooltipItems) {
                                                    return 'Tempo de ciclo:';
                                                    },
                                                    label: function(tooltipItem) {
                                                        return Number(tooltipItem.yLabel) + " Segundos";
                                                    },  
                                                },
                                                titleFont: {weight: 'bold'},
                                                bodyFont: {weight: 'bold'},
                                                backgroundColor:'#d5d3bf', 
                                                bodyFontColor:'#000000', 
                                                titleFontColor:'#000000',
                                            },
                                maintainAspectRatio: false,
                                responsive: true
                            }
                });
            
            }
    });
    
    
    /*Function to update the bar chart*/
    function updateBarGraph(chart, color, data) {
        chart.data.datasets.pop();
        chart.data.datasets.push({
            backgroundColor: color,
            data: data
        });
        chart.update();
    }

    function atualizar(){
        jQuery.ajax({
        url:'/dadosoee',
        type: 'GET',
        data: {'id-maquina': '1'},
        success:  function(response){
            for (let index = response['all'].length - 1; index >= 0; index--) {
                const oee = response['all'][index];
                
                //Maquina
                if (oee [0] != 'Parada'){
                    updateRing(document.getElementById("pecas-1"), "#4BB543", oee[0]);

                    jQuery('#paradas-1').removeClass().addClass("alert alert-warning");
                    jQuery('#paradas-1').text('Total: ' + oee[10]);
                    jQuery('#refugos-1').removeClass().addClass("alert alert-danger");
                    jQuery('#refugos-1').text('Total: ' + oee[9]);
                    
                    updateRing(document.getElementById("meta-1"), "#0275d8", oee[6]);
                    document.getElementById("dtinicio-1").innerHTML = 'Inicio: '+ oee[11];
                    if (oee[12]=='funcionando'){
                        jQuery('#card-1').removeClass().addClass('card-header bg-success');
                        jQuery('#estado-setup-1').removeClass().addClass("alert alert-success");
                        jQuery('#estado-setup-1').text('Máquina Produzindo');
                    }
                    else{
                        jQuery('#card-1').removeClass().addClass('card-header bg-warning');
                        jQuery('#estado-setup-1').removeClass().addClass("alert alert-warning");
                        jQuery('#estado-setup-1').text('Máquina Parada: ' + oee[13] + ' | Tempo: ' + oee[14] + ' Minutos');
                    }
                }
                else {
                    updateRing(document.getElementById("pecas-1"), "#FF0000", oee[0]);
                    jQuery('#paradas-1').removeClass().addClass("alert alert-success");
                    jQuery('#paradas-1').text('Total: ');
                    jQuery('#refugos-1').removeClass().addClass("alert alert-success");
                    jQuery('#refugos-1').text('Total: ');
                    updateRing(document.getElementById("meta-1"), "#0275d8", oee[6]);
                    jQuery('#card-1').removeClass().addClass('card-header bg-danger');
                    jQuery('#estado-setup-1').removeClass().addClass("alert alert-danger");
                    jQuery('#estado-setup-1').text('Aguardando Inicio de Produção');
                }
                if (oee[4] >= 85){
                    updateRing(document.getElementById("oee-1"), "#4BB543", oee[4]);
                }
                else if(oee[4] < 85 && oee[4] > 65){
                    updateRing(document.getElementById("oee-1"), "#0275d8", oee[4]);
                }
                else {
                    updateRing(document.getElementById("oee-1"), "#FF0000", oee[4]);
                }
                updatedInd = [oee[2], oee[1], oee[3]];
                updateBarGraph(chart1, colouarray, updatedInd);
                jQuery('#qt1-1').text(oee[7][0]);
                jQuery('#qt2-1').text(oee[7][1]);
                jQuery('#qt3-1').text(oee[7][2]);
                jQuery('#qt4-1').text(oee[7][3]);
                jQuery('#qt5-1').text(oee[7][4]);
                jQuery('#qt6-1').text(oee[7][5]);
                jQuery('#qt7-1').text(oee[7][6]);
                jQuery('#qt8-1').text(oee[7][7]);
                jQuery('#qt9-1').text(oee[7][8]);
                jQuery('#qt10-1').text(oee[7][9]);

                jQuery('#qt11-1').text(oee[7][10]);
                jQuery('#qt12-1').text(oee[7][11]);
                jQuery('#qt13-1').text(oee[7][12]);
                jQuery('#qt14-1').text(oee[7][13]);
                jQuery('#qt15-1').text(oee[7][14]);
                jQuery('#qt16-1').text(oee[7][15]);
                jQuery('#qt17-1').text(oee[7][16]);
                jQuery('#qt18-1').text(oee[7][17]);
                jQuery('#qt19-1').text(oee[7][18]);
                jQuery('#qt20-1').text(oee[7][19]);

                jQuery.ajax({
                url:'/relatorio-takt',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '1'},
                success:  function(response){
                    lineChart1.data.datasets = prepareLineData(response, backgroundColorDict);
                    lineChart1.update();
                    jQuery('#takt-1').removeClass().addClass("alert alert-success");
                    jQuery('#takt-1').text('Ciclo Médio :' + response['media'] + ' Segundos');
                    }
                });
                jQuery.ajax({
                url:'/relatorio-parada',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '1'},
                success:  function(response){
                    console.log(response['motivo']);
                    if(response['motivo']!=''){
                        dados=(response['motivo'].length);
                        chart2.data.labels=response['motivo']
                        for (var i=0; i < dados; i++){
                            chart2.data.datasets[0].data[i]=response['tempo'][i]
                        }
                        chart2.update();
                    }
                    else{
                        chart2.data.labels=['']
                        chart2.data.datasets[0].data[0]=['0']
                        chart2.update();
                    }
                }
                });
                jQuery.ajax({
                url:'/relatorio-refugo',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '1'},
                success:  function(response){
                    if(response['refugos']!=''){
                        dados1=(response['refugos'].length);
                        chart3.data.labels=response['motivo']
                        console.log(response['refugos']);
                        for (var i=0; i < dados1; i++){
                            chart3.data.datasets[0].data[i]=response['refugos'][i]
                        }
                        chart3.update();
                    }
                    else{
                        chart3.data.labels=['']
                        chart3.data.datasets[0].data[0]=['0']
                        chart3.update();
                    }
                }
                });
                        
                }
            }
        });

        jQuery.ajax({
        url:'/dadosoee',
        type: 'GET',
        data: {'id-maquina': '2'},
        success:  function(response){
            for (let index = response['all'].length - 1; index >= 0; index--) {
                const oee = response['all'][index];
                
                //Maquina
                if (oee [0] != 'Parada'){
                    updateRing(document.getElementById("pecas-2"), "#4BB543", oee[0]);
                    jQuery('#paradas-2').removeClass().addClass("alert alert-warning");
                    jQuery('#paradas-2').text('Total: ' + oee[10]);
                    jQuery('#refugos-2').removeClass().addClass("alert alert-danger");
                    jQuery('#refugos-2').text('Total: ' + oee[9]);
                    updateRing(document.getElementById("meta-2"), "#0275d8", oee[6]);
                    document.getElementById("dtinicio-2").innerHTML = 'Inicio: '+ oee[11];
                    if (oee[12]=='funcionando'){
                        jQuery('#card-2').removeClass().addClass('card-header bg-success');
                        jQuery('#estado-setup-2').removeClass().addClass("alert alert-success");
                        jQuery('#estado-setup-2').text('Máquina Produzindo');
                    }
                    else{
                        jQuery('#card-2').removeClass().addClass('card-header bg-warning');
                        jQuery('#estado-setup-2').removeClass().addClass("alert alert-warning");
                        jQuery('#estado-setup-2').text('Máquina Parada: ' + oee[13] + ' | Tempo: ' + oee[14] + ' Minutos');
                    }
                }
                else {
                    updateRing(document.getElementById("pecas-2"), "#FF0000", oee[0]);
                    jQuery('#paradas-2').removeClass().addClass("alert alert-success");
                    jQuery('#paradas-2').text('Total: ');
                    jQuery('#refugos-2').removeClass().addClass("alert alert-success");
                    jQuery('#refugos-2').text('Total: ');
                    updateRing(document.getElementById("meta-2"), "#0275d8", oee[6]);
                    jQuery('#card-2').removeClass().addClass('card-header bg-danger');
                    jQuery('#estado-setup-2').removeClass().addClass("alert alert-danger");
                    jQuery('#estado-setup-2').text('Aguardando Inicio de Produção');
                }
                if (oee[4] >= 85){
                    updateRing(document.getElementById("oee-2"), "#4BB543", oee[4]);
                }
                else if(oee[4] < 85 && oee[4] > 65){
                    updateRing(document.getElementById("oee-2"), "#0275d8", oee[4]);
                }
                else {
                    updateRing(document.getElementById("oee-2"), "#FF0000", oee[4]);
                }
                updatedInd = [oee[2], oee[1], oee[3]];
                updateBarGraph(chart4, colouarray, updatedInd);
                jQuery('#qt1-2').text(oee[7][0]);
                jQuery('#qt2-2').text(oee[7][1]);
                jQuery('#qt3-2').text(oee[7][2]);
                jQuery('#qt4-2').text(oee[7][3]);
                jQuery('#qt5-2').text(oee[7][4]);
                jQuery('#qt6-2').text(oee[7][5]);
                jQuery('#qt7-2').text(oee[7][6]);
                jQuery('#qt8-2').text(oee[7][7]);
                jQuery('#qt9-2').text(oee[7][8]);
                jQuery('#qt10-2').text(oee[7][9]);

                jQuery('#qt11-2').text(oee[7][10]);
                jQuery('#qt12-2').text(oee[7][11]);
                jQuery('#qt13-2').text(oee[7][12]);
                jQuery('#qt14-2').text(oee[7][13]);
                jQuery('#qt15-2').text(oee[7][14]);
                jQuery('#qt16-2').text(oee[7][15]);
                jQuery('#qt17-2').text(oee[7][16]);
                jQuery('#qt18-2').text(oee[7][17]);
                jQuery('#qt19-2').text(oee[7][18]);
                jQuery('#qt20-2').text(oee[7][19]);

                jQuery.ajax({
                url:'/relatorio-takt',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '2'},
                success:  function(response){
                    lineChart2.data.datasets = prepareLineData(response, backgroundColorDict);
                    lineChart2.update();
                    jQuery('#takt-2').removeClass().addClass("alert alert-success");
                    jQuery('#takt-2').text('Ciclo Médio :' + response['media'] + ' Segundos');
                    }
                });
                jQuery.ajax({
                url:'/relatorio-parada',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '2'},
                success:  function(response){
                    console.log(response['motivo']);
                    if(response['motivo']!=''){
                        dados=(response['motivo'].length);
                        chart5.data.labels=response['motivo']
                        for (var i=0; i < dados; i++){
                            chart5.data.datasets[0].data[i]=response['tempo'][i]
                        }
                        chart5.update();
                    }
                    else{
                        chart5.data.labels=['']
                        chart5.data.datasets[0].data[0]=['0']
                        chart5.update();
                    }
                }
                });
                jQuery.ajax({
                url:'/relatorio-refugo',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '2'},
                success:  function(response){
                    if(response['refugos']!=''){
                        dados1=(response['refugos'].length);
                        chart6.data.labels=response['motivo']
                        console.log(response['refugos']);
                        for (var i=0; i < dados1; i++){
                            chart6.data.datasets[0].data[i]=response['refugos'][i]
                        }
                        chart6.update();
                    }
                    else{
                        chart6.data.labels=['']
                        chart6.data.datasets[0].data[0]=['0']
                        chart6.update();
                    }
                }
                });
                        
                }
            }
        });

        jQuery.ajax({
        url:'/dadosoee',
        type: 'GET',
        data: {'id-maquina': '3'},
        success:  function(response){
            for (let index = response['all'].length - 1; index >= 0; index--) {
                const oee = response['all'][index];
                
                //Maquina
                if (oee [0] != 'Parada'){
                    updateRing(document.getElementById("pecas-3"), "#4BB543", oee[0]);
                    jQuery('#paradas-3').removeClass().addClass("alert alert-warning");
                    jQuery('#paradas-3').text('Total: ' + oee[10]);
                    jQuery('#refugos-3').removeClass().addClass("alert alert-danger");
                    jQuery('#refugos-3').text('Total: ' + oee[9]);
                    updateRing(document.getElementById("meta-3"), "#0275d8", oee[6]);
                    document.getElementById("dtinicio-3").innerHTML = 'Inicio: '+ oee[11];
                    if (oee[12]=='funcionando'){
                        jQuery('#card-3').removeClass().addClass('card-header bg-success');
                        jQuery('#estado-setup-3').removeClass().addClass("alert alert-success");
                        jQuery('#estado-setup-3').text('Máquina Produzindo');
                    }
                    else{
                        jQuery('#card-3').removeClass().addClass('card-header bg-warning');
                        jQuery('#estado-setup-3').removeClass().addClass("alert alert-warning");
                        jQuery('#estado-setup-3').text('Máquina Parada: ' + oee[13] + ' | Tempo: ' + oee[14] + ' Minutos');
                    }
                }
                else {
                    updateRing(document.getElementById("pecas-3"), "#FF0000", oee[0]);
                    jQuery('#paradas-3').removeClass().addClass("alert alert-success");
                    jQuery('#paradas-3').text('Total: ');
                    jQuery('#refugos-3').removeClass().addClass("alert alert-success");
                    jQuery('#refugos-3').text('Total: ');
                    updateRing(document.getElementById("meta-3"), "#0275d8", oee[6]);
                    jQuery('#card-3').removeClass().addClass('card-header bg-danger');

                    jQuery('#estado-setup-3').removeClass().addClass("alert alert-danger");
                    jQuery('#estado-setup-3').text('Aguardando Inicio de Produção');
                }
                if (oee[4] >= 85){
                    updateRing(document.getElementById("oee-3"), "#4BB543", oee[4]);
                }
                else if(oee[4] < 85 && oee[4] > 65){
                    updateRing(document.getElementById("oee-3"), "#0275d8", oee[4]);
                }
                else {
                    updateRing(document.getElementById("oee-3"), "#FF0000", oee[4]);
                }
                updatedInd = [oee[2], oee[1], oee[3]];
                updateBarGraph(chart7, colouarray, updatedInd);
                jQuery('#qt1-3').text(oee[7][0]);
                jQuery('#qt2-3').text(oee[7][1]);
                jQuery('#qt3-3').text(oee[7][2]);
                jQuery('#qt4-3').text(oee[7][3]);
                jQuery('#qt5-3').text(oee[7][4]);
                jQuery('#qt6-3').text(oee[7][5]);
                jQuery('#qt7-3').text(oee[7][6]);
                jQuery('#qt8-3').text(oee[7][7]);
                jQuery('#qt9-3').text(oee[7][8]);
                jQuery('#qt10-3').text(oee[7][9]);

                jQuery('#qt11-3').text(oee[7][10]);
                jQuery('#qt12-3').text(oee[7][11]);
                jQuery('#qt13-3').text(oee[7][12]);
                jQuery('#qt14-3').text(oee[7][13]);
                jQuery('#qt15-3').text(oee[7][14]);
                jQuery('#qt16-3').text(oee[7][15]);
                jQuery('#qt17-3').text(oee[7][16]);
                jQuery('#qt18-3').text(oee[7][17]);
                jQuery('#qt19-3').text(oee[7][18]);
                jQuery('#qt20-3').text(oee[7][19]);

                jQuery.ajax({
                url:'/relatorio-takt',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '3'},
                success:  function(response){
                    lineChart3.data.datasets = prepareLineData(response, backgroundColorDict);
                    lineChart3.update();
                    jQuery('#takt-3').removeClass().addClass("alert alert-success");
                    jQuery('#takt-3').text('Ciclo Médio :' + response['media'] + ' Segundos');
                    }
                });
                jQuery.ajax({
                url:'/relatorio-parada',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '3'},
                success:  function(response){
                    if(response['motivo']!=''){
                        dados=(response['motivo'].length);
                        chart8.data.labels=response['motivo']
                        for (var i=0; i < dados; i++){
                            chart8.data.datasets[0].data[i]=response['tempo'][i]
                        }
                        chart8.update();
                    }
                    else{
                        chart8.data.labels=['']
                        chart8.data.datasets[0].data[0]=['0']
                        chart8.update();
                    }
                }
                });
                jQuery.ajax({
                url:'/relatorio-refugo',
                type: 'GET',
                data: {'base-tempo': oee[8], 'id-maquina': '3'},
                success:  function(response){
                    if(response['refugos']!=''){
                        dados1=(response['refugos'].length);
                        chart9.data.labels=response['motivo']
                        for (var i=0; i < dados1; i++){
                            chart9.data.datasets[0].data[i]=response['refugos'][i]
                        }
                        chart9.update();
                    }
                    else{
                        chart9.data.labels=['']
                        chart9.data.datasets[0].data[0]=['0']
                        chart9.update();
                    }
                }
                });
                        
                }
            }
        });

    };
    setInterval(atualizar, 10000);

    setTimeout(function(){
        window.location.reload(1);
    }, 120000);

</script>



{% endblock %}